<!-- app/views/messages/new.html.erb-->
<%= turbo_frame_tag "campaigns" do %>
  <div class="message-container">
    <% if @client.present? %>
      <h1 class="message-title">Send Message to <%= @client.full_name %></h1>
    <% else %>
      <h1 class="message-title">Client not found</h1>
    <% end %>

    <div class="message-client-info">
      <% if @campaign&.images&.attached? %>
        <div class="images-grid">
          <% @campaign.images.each do |image| %>
            <div class="image-wrapper">
              <%= image_tag image, class: "client-image" %>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>

    <%= form_with(model: @message, url: campaign_messages_path(@campaign), local: true, class: "message-form") do |form| %>
      <div class="form-group">
        <%= form.label :subject, "Subject" %>
        <%= form.text_field :subject, value: "Regarding: #{@campaign.name}", class: "form-control" %>
      </div>

      <div class="form-group">
        <%= form.label :body, "Message Body" %>
        <%= form.text_area :body, class: "form-control" %>
      </div>

      <%= form.hidden_field :client_id, value: params[:client_id] %>
      <%= form.submit "Send Message", class: "btn btn-primary submit-btn" %>
    <% end %>
  </div>
<% end %>